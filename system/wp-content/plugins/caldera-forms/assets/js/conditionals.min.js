var calders_forms_check_conditions,calders_forms_init_conditions;!function(e){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var r=this.length>>>0,t=Number(arguments[1])||0;for(t=0>t?Math.ceil(t):Math.floor(t),0>t&&(t+=r);r>t;t++)if(t in this&&this[t]===e)return t;return-1}),cf_debounce=function(e,r,t){var a;return function(){var o=this,i=arguments,n=function(){a=null,t||e.apply(o,i)},s=t&&!a;clearTimeout(a),a=setTimeout(n,r),s&&e.apply(o,i)}},calders_forms_check_conditions=function(r){if("undefined"!=typeof caldera_conditionals&&"undefined"!=typeof caldera_conditionals[r]){var t=e("#"+r);for(var a in caldera_conditionals[r]){var o=jQuery("#conditional_"+a);if(o.length){var i=caldera_conditionals[r][a].type,n=caldera_conditionals[r][a].group,s=[];for(var l in n){var d={},c=n[l];for(var f in c){var u=t.find('[data-field="'+c[f].field+'"]'),h=[],g="function"==typeof c[f].value?c[f].value():c[f].value;if("undefined"!=typeof c[f].selectors)for(var p in c[f].selectors){var m=new RegExp(p,"g");g=g.replace(m,e(c[f].selectors[p]).val())}if(d[f]=!1,u.is(":radio,:checkbox")?u=u.filter(":checked"):u.is("div")&&(u=jQuery("<input>").val(u.html())),u.length)for(var v=0;v<u.length;v++)h.push(u[v].value);else h.push(c[f].field);switch(c[f].compare){case"is":h.length&&h.indexOf(g.toString())>=0&&(d[f]=!0);break;case"isnot":h.length&&h.indexOf(g)<0&&(d[f]=!0);break;case">":case"greater":d[f]=parseFloat(h.reduce(function(e,r){return e+r}))>parseFloat(g);break;case"<":case"smaller":d[f]=parseFloat(h.reduce(function(e,r){return e+r}))<parseFloat(g);break;case"startswith":for(var v=0;v<h.length;v++)h[v].toLowerCase().substr(0,g.toLowerCase().length)===g.toLowerCase()&&(d[f]=!0);break;case"endswith":for(var v=0;v<h.length;v++)h[v].toLowerCase().substr(h[v].toLowerCase().length-g.toLowerCase().length)===g.toLowerCase()&&(d[f]=!0);break;case"contains":for(var v=0;v<h.length;v++)h[v].toLowerCase().indexOf(g)>=0&&(d[f]=!0)}}istrue=!0;for(var _ in d)if(d[_]===!1){istrue=!1;break}s.push(istrue)}var y,b=jQuery("#conditional-"+a+"-tmpl").html(),w=jQuery("#conditional_"+a),k=jQuery('[data-field="'+a+'"]');s.length&&s.indexOf(!0)>=0?"show"===i?y="show":"hide"===i?y="hide":"disable"===i&&(y="disable"):y="show"===i?"hide":"disable"===i?"enable":"show","show"===y?w.html().length||(w.html(b).trigger("cf.add"),jQuery(document).trigger("cf.add")):"hide"===y?w.html().length&&(k.val("").empty().prop("checked",!1),w.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===y?w.html().length?k.prop("disabled",!1):(w.html(b).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===y&&(w.html().length?k.prop("disabled","disabled"):(w.html(b).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+a+'"]').prop("disabled","disabled")))}}}},calders_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(r){var t=e(this).closest(".caldera_forms_form").prop("id");calders_forms_check_conditions(t)},10))},"undefined"!=typeof caldera_conditionals&&calders_forms_init_conditions()}(jQuery);